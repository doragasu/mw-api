<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MegaWiFi: tsk</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MegaWiFi<span id="projectnumber">&#160;1.5</span>
   </div>
   <div id="projectbrief">MegaWiFi API documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__tsk.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">tsk</div></div>
</div><!--header-->
<div class="contents">

<p>Tasking routines related functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac92ca5ab87034a348decad7ee8d4bd1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#gac92ca5ab87034a348decad7ee8d4bd1b">FPS</a>&#160;&#160;&#160;60</td></tr>
<tr class="memdesc:gac92ca5ab87034a348decad7ee8d4bd1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frames per second (60 on NTSC consoles, 50 on PAL machines)  <a href="group__tsk.html#gac92ca5ab87034a348decad7ee8d4bd1b">More...</a><br /></td></tr>
<tr class="separator:gac92ca5ab87034a348decad7ee8d4bd1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga604f92993b6bdd4d21fedbc88b1293d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#ga604f92993b6bdd4d21fedbc88b1293d3">MS_TO_FRAMES</a>(ms)&#160;&#160;&#160;(((ms)*<a class="el" href="group__tsk.html#gac92ca5ab87034a348decad7ee8d4bd1b">FPS</a>/500 + 1)/2)</td></tr>
<tr class="memdesc:ga604f92993b6bdd4d21fedbc88b1293d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts milliseconds to frames, rounding to the nearest.  <a href="group__tsk.html#ga604f92993b6bdd4d21fedbc88b1293d3">More...</a><br /></td></tr>
<tr class="separator:ga604f92993b6bdd4d21fedbc88b1293d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89ddf87ad40b7d5057b04b016e9aa1a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#ga89ddf87ad40b7d5057b04b016e9aa1a9">TSK_PEND_FOREVER</a>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:ga89ddf87ad40b7d5057b04b016e9aa1a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout value to use for infinite waits.  <a href="group__tsk.html#ga89ddf87ad40b7d5057b04b016e9aa1a9">More...</a><br /></td></tr>
<tr class="separator:ga89ddf87ad40b7d5057b04b016e9aa1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafd8b1dc19307eada07d9718c6aeca50b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#gafd8b1dc19307eada07d9718c6aeca50b">vint_cb_set</a> (void(*vint_cb)(void))</td></tr>
<tr class="separator:gafd8b1dc19307eada07d9718c6aeca50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32895b3a3fd1f38c8cf82714958821ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#ga32895b3a3fd1f38c8cf82714958821ac">tsk_user_set</a> (void(*user_tsk)(void))</td></tr>
<tr class="separator:ga32895b3a3fd1f38c8cf82714958821ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad679fe4ec617c7fa1f102c0cc15b4d24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#gad679fe4ec617c7fa1f102c0cc15b4d24">tsk_user_yield</a> (void)</td></tr>
<tr class="separator:gad679fe4ec617c7fa1f102c0cc15b4d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab33f854500abe2b290ce45878e636b24"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#gab33f854500abe2b290ce45878e636b24">tsk_super_pend</a> (int16_t wait_tout)</td></tr>
<tr class="separator:gab33f854500abe2b290ce45878e636b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c4c90496867bc1d8e80a0983b829c77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tsk.html#ga5c4c90496867bc1d8e80a0983b829c77">tsk_super_post</a> (bool force_ctx_sw)</td></tr>
<tr class="separator:ga5c4c90496867bc1d8e80a0983b829c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Tasking routines related functions. </p>
<dl class="section author"><dt>Author</dt><dd>Jesus Alonso (doragasu) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021</dd></dl>
<dl class="section note"><dt>Note</dt><dd>These functions are implemented in boot/sega.s </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gac92ca5ab87034a348decad7ee8d4bd1b" name="gac92ca5ab87034a348decad7ee8d4bd1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac92ca5ab87034a348decad7ee8d4bd1b">&#9670;&nbsp;</a></span>FPS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FPS&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frames per second (60 on NTSC consoles, 50 on PAL machines) </p>

<p class="definition">Definition at line <a class="el" href="tsk_8h_source.html#l00022">22</a> of file <a class="el" href="tsk_8h_source.html">tsk.h</a>.</p>

</div>
</div>
<a id="ga604f92993b6bdd4d21fedbc88b1293d3" name="ga604f92993b6bdd4d21fedbc88b1293d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga604f92993b6bdd4d21fedbc88b1293d3">&#9670;&nbsp;</a></span>MS_TO_FRAMES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MS_TO_FRAMES</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ms</td><td>)</td>
          <td>&#160;&#160;&#160;(((ms)*<a class="el" href="group__tsk.html#gac92ca5ab87034a348decad7ee8d4bd1b">FPS</a>/500 + 1)/2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts milliseconds to frames, rounding to the nearest. </p>

<p class="definition">Definition at line <a class="el" href="tsk_8h_source.html#l00025">25</a> of file <a class="el" href="tsk_8h_source.html">tsk.h</a>.</p>

</div>
</div>
<a id="ga89ddf87ad40b7d5057b04b016e9aa1a9" name="ga89ddf87ad40b7d5057b04b016e9aa1a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89ddf87ad40b7d5057b04b016e9aa1a9">&#9670;&nbsp;</a></span>TSK_PEND_FOREVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TSK_PEND_FOREVER&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timeout value to use for infinite waits. </p>

<p class="definition">Definition at line <a class="el" href="tsk_8h_source.html#l00028">28</a> of file <a class="el" href="tsk_8h_source.html">tsk.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab33f854500abe2b290ce45878e636b24" name="gab33f854500abe2b290ce45878e636b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab33f854500abe2b290ce45878e636b24">&#9670;&nbsp;</a></span>tsk_super_pend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tsk_super_pend </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>wait_tout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Block supervisor task and resume user task. Supervisor task will not resume execution until super_tsk_post() is called from user task or a timeout happens..</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_tout</td><td>Maximum number of frames to wait while blocking. Use TSK_PEND_FOREVER for an infinite wait, or a positive number (greater than 0) for a specific number of frames.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if task was awakened from user task, or true if timeout occurred. </dd></dl>

</div>
</div>
<a id="ga5c4c90496867bc1d8e80a0983b829c77" name="ga5c4c90496867bc1d8e80a0983b829c77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c4c90496867bc1d8e80a0983b829c77">&#9670;&nbsp;</a></span>tsk_super_post()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tsk_super_post </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force_ctx_sw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Resume a blocked supervisor task. Must be called from user task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">force_ctx_sw</td><td>If true, immediately causes a context switch to supervisor task. If false, context switch will not occur until the VBLANK interrupt. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga32895b3a3fd1f38c8cf82714958821ac" name="ga32895b3a3fd1f38c8cf82714958821ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32895b3a3fd1f38c8cf82714958821ac">&#9670;&nbsp;</a></span>tsk_user_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tsk_user_set </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>user_tsk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Configure the task used as user task. Must be invoked once before calling <a class="el" href="group__tsk.html#gad679fe4ec617c7fa1f102c0cc15b4d24">tsk_user_yield()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">user_tsk</td><td>A function pointer to the user task to configure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad679fe4ec617c7fa1f102c0cc15b4d24" name="gad679fe4ec617c7fa1f102c0cc15b4d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad679fe4ec617c7fa1f102c0cc15b4d24">&#9670;&nbsp;</a></span>tsk_user_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tsk_user_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Yield from supervisor task to user task. The user task will resume and will use all the available CPU time until the next vertical blanking interrupt, that will resume the supervisor task. </p>

</div>
</div>
<a id="gafd8b1dc19307eada07d9718c6aeca50b" name="gafd8b1dc19307eada07d9718c6aeca50b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd8b1dc19307eada07d9718c6aeca50b">&#9670;&nbsp;</a></span>vint_cb_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vint_cb_set </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>vint_cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Configure the VBLANK interrupt attention callback. Note that the function is run in exception context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Function</td><td>pointer to the VBLANK callback.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Callback is run in exception context. Use rte (instead of rts) if function is coded in assembly language, or <b>attribute</b>((interrupt)) for C functions. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
