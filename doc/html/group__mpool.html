<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MegaWiFi: mpool</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MegaWiFi
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">MegaWiFi API documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__mpool.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mpool</div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory Pool.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa180bfb4c004ceee8ade5e4aedc5b063"><td class="memItemLeft" align="right" valign="top"><a id="gaa180bfb4c004ceee8ade5e4aedc5b063"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpool.html#gaa180bfb4c004ceee8ade5e4aedc5b063">MP_ALIGN</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:gaa180bfb4c004ceee8ade5e4aedc5b063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory alignment enforcement (in bytes). Must be a power of 2. <br /></td></tr>
<tr class="separator:gaa180bfb4c004ceee8ade5e4aedc5b063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd95f2e8043b036473c5f5b01920c358"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpool.html#gafd95f2e8043b036473c5f5b01920c358">mp_free_pool</a>()&#160;&#160;&#160;<a class="el" href="group__mpool.html#gae1b6b14b314e5aedcb6dadcc889c4cec">mp_init</a>()</td></tr>
<tr class="memdesc:gafd95f2e8043b036473c5f5b01920c358"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all the memory previously requested.  <a href="group__mpool.html#gafd95f2e8043b036473c5f5b01920c358">More...</a><br /></td></tr>
<tr class="separator:gafd95f2e8043b036473c5f5b01920c358"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae1b6b14b314e5aedcb6dadcc889c4cec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpool.html#gae1b6b14b314e5aedcb6dadcc889c4cec">mp_init</a> (int force_init)</td></tr>
<tr class="memdesc:gae1b6b14b314e5aedcb6dadcc889c4cec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool initialization.  <a href="group__mpool.html#gae1b6b14b314e5aedcb6dadcc889c4cec">More...</a><br /></td></tr>
<tr class="separator:gae1b6b14b314e5aedcb6dadcc889c4cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cd611d9987a2d9dacfdf2b0dce737ad"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad">mp_alloc</a> (uint16_t length) __attribute__((malloc))</td></tr>
<tr class="memdesc:ga6cd611d9987a2d9dacfdf2b0dce737ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates data from the pool.  <a href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad">More...</a><br /></td></tr>
<tr class="separator:ga6cd611d9987a2d9dacfdf2b0dce737ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca876532ed5798c7e176f0a7b770ac71"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpool.html#gaca876532ed5798c7e176f0a7b770ac71">mp_calloc</a> (uint16_t length) __attribute__((malloc))</td></tr>
<tr class="memdesc:gaca876532ed5798c7e176f0a7b770ac71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates and zero fills data from the pool.  <a href="group__mpool.html#gaca876532ed5798c7e176f0a7b770ac71">More...</a><br /></td></tr>
<tr class="separator:gaca876532ed5798c7e176f0a7b770ac71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa587236f548e1a16c90a7981cba57e85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mpool.html#gaa587236f548e1a16c90a7981cba57e85">mp_free_to</a> (void *pos)</td></tr>
<tr class="memdesc:gaa587236f548e1a16c90a7981cba57e85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory up to the one pointed by pos.  <a href="group__mpool.html#gaa587236f548e1a16c90a7981cba57e85">More...</a><br /></td></tr>
<tr class="separator:gaa587236f548e1a16c90a7981cba57e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Memory Pool. </p>
<p>Implements a memory pool for dynamic memory allocation. This memory pool gets memory from the unused region between the end of the .bss section and the stack top. The implementation is pretty simple: an internal pointer grows when memory is requested, and is reset to the specified position to free memory. This restricts the usage of the module to scenarios that free memory in exactly the reverse order in which they requested it (it does not allow generic allocate/free such as malloc() does).</p>
<dl class="section author"><dt>Author</dt><dd>doragasu </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2017 </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gafd95f2e8043b036473c5f5b01920c358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd95f2e8043b036473c5f5b01920c358">&#9670;&nbsp;</a></span>mp_free_pool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mp_free_pool</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__mpool.html#gae1b6b14b314e5aedcb6dadcc889c4cec">mp_init</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all the memory previously requested. </p>
<p>Deallocates all the memory previously reserved from the memory pool.</p>
<dl class="section note"><dt>Note</dt><dd>In current implementation, this call is just an alias of <a class="el" href="group__mpool.html#gae1b6b14b314e5aedcb6dadcc889c4cec" title="Pool initialization.">mp_init()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mpool_8h_source.html#l00102">102</a> of file <a class="el" href="mpool_8h_source.html">mpool.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6cd611d9987a2d9dacfdf2b0dce737ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6cd611d9987a2d9dacfdf2b0dce737ad">&#9670;&nbsp;</a></span>mp_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mp_alloc </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates data from the pool. </p>
<p>Obtains a memory chunck with enforced alignment and requested length. Obtained chunck is contiguous.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of the contiguous section to allocate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the allocated memory zone of the requested length, or NULL if the allocation could not succeed.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Maybe allocation should be tested against the stack pointer</dd></dl>

</div>
</div>
<a id="gaca876532ed5798c7e176f0a7b770ac71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca876532ed5798c7e176f0a7b770ac71">&#9670;&nbsp;</a></span>mp_calloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mp_calloc </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates and zero fills data from the pool. </p>
<p>Obtains a memory chunck with enforced alignment and requested length. Obtained chunck is contiguous and initialized to zeros.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of the contiguous section to allocate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the allocated memory zone of the requested length, or NULL if the allocation could not succeed.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Maybe allocation should be tested against the stack pointer</dd></dl>

</div>
</div>
<a id="gaa587236f548e1a16c90a7981cba57e85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa587236f548e1a16c90a7981cba57e85">&#9670;&nbsp;</a></span>mp_free_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mp_free_to </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free memory up to the one pointed by pos. </p>
<p>Memory previously allocated is freed up to pos position. The usual (and recommended) way of using this function is calling it with pos set to the value of the last <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a> call.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function will free memory requested by several <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a> calls if the input pos pointer is not the last returned by <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a>. E.g. if <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a> is called consecutively three times, and <a class="el" href="group__mpool.html#gaa587236f548e1a16c90a7981cba57e85" title="Free memory up to the one pointed by pos.">mp_free_to()</a> is called with the pointer returned by the second call, the memory granted by the second and third calls to <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a> will be deallocated. Although this is usually undesired, sometimes it is useful. In any case it is important taking it into account when using this module.</dd>
<dd>
Function fails (and does nothing) if input position is NOT aligned as required by MP_ALIGN parameter. As <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a> always returns aligned pointers, this should not be a problem when using the function as intended (passing pointers obtained by <a class="el" href="group__mpool.html#ga6cd611d9987a2d9dacfdf2b0dce737ad" title="Allocates data from the pool.">mp_alloc()</a> calls). </dd></dl>

</div>
</div>
<a id="gae1b6b14b314e5aedcb6dadcc889c4cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1b6b14b314e5aedcb6dadcc889c4cec">&#9670;&nbsp;</a></span>mp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mp_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force_init</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pool initialization. </p>
<p>Call this function before using any other in this module</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">force_init</td><td>Force initialization (and memory reset) even if the module was previously initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
